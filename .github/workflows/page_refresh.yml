name: 🎛️ Manual Workflow Runner

on:
  workflow_dispatch:

permissions:
  actions: write
  contents: read

jobs:
  trigger_child_workflows:
    runs-on: ubuntu-latest
    env:
      TARGET_REF: main   # <-- change if your default branch isn't 'main'
    steps:
      # --- 1) Trigger metrics.yml ---
      - name: Dispatch metrics.yml
        uses: peter-evans/workflow-dispatch@v3
        continue-on-error: true
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          repository: ${{ github.repository }}
          workflow: metrics.yml
          ref: ${{ env.TARGET_REF }}

      # --- 2) Trigger recent-activity.yml ---
      - name: Dispatch recent-activity.yml
        uses: peter-evans/workflow-dispatch@v3
        continue-on-error: true
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          repository: ${{ github.repository }}
          workflow: recent-activity.yml
          ref: ${{ env.TARGET_REF }}

      # --- 3) Trigger snake.yml ---
      - name: Dispatch snake.yml
        uses: peter-evans/workflow-dispatch@v3
        continue-on-error: true
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          repository: ${{ github.repository }}
          workflow: snake.yml
          ref: ${{ env.TARGET_REF }}
